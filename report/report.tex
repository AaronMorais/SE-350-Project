\documentclass[12pt]{report}

% Packages (keep sorted)
\usepackage{
    algorithm,      % For algorithm environment
    algpseudocode,  % For pseudocode
    hyperref,       % For PDF bookmarks
    tikz,           % For state diagrams
}

% State diagrams (i.e. I/O)
\usetikzlibrary{
    shadows,
    positioning,
}
% TODO: move these to another file.
\tikzstyle{block} = [rectangle, draw,
    text width=5em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw]
\tikzstyle{cloud} = [draw, rectangle, node distance=3cm,
    minimum height=2em]

% PDF bookmarks setup (keep sorted)
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
}

\begin{document}

% Info section

% TODO come up with something more creative
\title{RTX Project Report}

% TODO check names %
\author{
    Xiang, Dian\\
    20431601\\
    \texttt{dxiang@uwaterloo.ca}
    \and
    Justin McGirr\\
    20413625\\
    \texttt{jmcgirr@uwaterloo.ca}
    \and
    Adrian Cheung\\
    20421743\\
    \texttt{a32cheun@uwaterloo.ca}
    \and
    Aaron Morais\\
    20413440\\
    \texttt{aemorais@uwaterloo.ca}
}

\maketitle

\begin{abstract}
    % Using the Keil Development Environment (Keil IDE) and LPC1768 boards using
    % the ARM instruction set, an operating system was implemented with basic
    % functionality throughout this project. The operating system offers a stable
    % and succinct API, and also tries to ensure high-performance.
    % It offers a message-passing interface between processes, and allows
    % processes to release the processor to share CPU time. Additionally, we
    % implemented memory management of the on-board memory, allowing processes to
    % dynamically acquire and release memory during our operating-system's
    % runtime.
    % I/O between keyboard input and display output on a UART connection was also
    % implemented, which allows users to interact with processes on the system in
    % near real-time. Overall, this operating system offers a minimal but fast
    % API, and is easily extendible with features necessary to implement a larger
    % and more feature-complete operating system with minimal overhead.
\end{abstract}

\tableofcontents
\listofalgorithms
\listoffigures

% NOTE(sanjay): uncomment these if we add any figures or tables
% \listoftables


\part{Introduction}
% TODO INTRODUCTION

\part{Kernel API}
% Make sure to include pseudocode and testing, if appropriate.

\chapter{Memory Management}
% void *request_memory_block();
% int release_memory_block(void *memory_block);

\chapter{Processor Management}
% int release_processor();

\chapter{Processor Management}

\section{Description}

\section{Running Time Analysis}

\chapter{Memory Allocator}
% Make sure to include pseudocode and testing, if appropriate.

\section{Description}

\subsection{Block Layer}

\subsection{Metadata Layer}

\section{Theoretical Analysis}

\section{Measurements}

\part{Interrupts and Their Handlers / Processes}

\section{Description}

\chapter{System and User Processes}

\section{Description}

\subsection{`funProcess'}

\subsection{`schizophrenicProcess'}

\subsection{`fibProcess'}

\subsection{`memoryMuncherProcess'}

\subsection{`releaseProcess'}

\part{Initialization}

\part{Testing}

\part{Timing}

\chapter{Acquiring Timings}

\chapter{Timing Analysis}

\part{What We Learned}

\part{Major Design Changes}


\appendix
\chapter{Raw Measurement Data}
\label{appendix:raw_data}

\section{Trial Information}

\begin{tabular}{l | l | l}
    Trial&Total Runtime&Notes \\
    \hline
    1&4.219&Normal (no stress processes) \\
    2&7.754&Wall clock \\
    3&8.487&Normal (no stress processes)\\
    4&6.5&No Memory Muncher or Release Process \\
    5&30.988&Stress processes \\
\end{tabular}

\section{Function Runtime Profiling}
\begin{tabular}{l | l | l | l | l}
    Function & Trial & Time ($\mu s$) & \# of Calls & Average time / call ($\mu s$) \\
    \hline
    k\_sendMessage&1&601.58&552&1.090 \\
    k\_receiveMessage&1&408.22&565&0.723 \\
    k\_acquireMemoryBlock&1&244.12&294&0.830 \\
    k\_sendMessage&2&647.44&594&1.090 \\
    k\_receiveMessage&2&437.78&606&0.722 \\
    k\_acquireMemoryBlock&2&258.68&320&0.808 \\
    k\_sendMessage&3&630.99&579&1.090 \\
    k\_receiveMessage&3&426.83&591&0.722 \\
    k\_acquireMemoryBlock&3&259.24&321&0.808 \\
    k\_sendMessage&4&108.80&100&1.088 \\
    k\_receiveMessage&4&74.44&110&0.677 \\
    k\_acquireMemoryBlock&4&92.47&123&0.752 \\
    k\_sendMessage&5&750.63&687&1.093 \\
    k\_receiveMessage&5&497.09&693&0.717 \\
    k\_acquireMemoryBlock&5&329.90&447&0.738 \\
\end{tabular}

\end{document}